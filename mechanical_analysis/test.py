from sympy import abc, symbols, diff, pi, Matrix, sin, cos
import numpy as np
# from numpy import sin, cos, pi
# from sympy import sin, cos

a = symbols('a')
b = symbols('b')
c = symbols('c')
d = symbols('d')
e = symbols('e')
f = symbols('f')

u = symbols('u')
v = symbols('v')
w = symbols('w')
x = symbols('x')
y = symbols('y')
z = symbols('z')

l = symbols('l')
jacobian =Matrix([
    [-l*sin(a)*cos(b) - l*sin(b)*cos(a) + w*(sin(a)*sin(b) - cos(a)*cos(b)) + x*(sin(a)*sin(b) - cos(a)*cos(b)) + y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*cos(d) + (-sin(a)*cos(b) - sin(b)*cos(a))*sin(d)*cos(c)) + z*((sin(a)*sin(b) - cos(a)*cos(b))*cos(e) + (-(-sin(a)*cos(b) - sin(b)*cos(a))*cos(c)*cos(d) - (sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d))*sin(e)), -l*sin(a)*cos(b) - l*sin(b)*cos(a) + w*(sin(a)*sin(b) - cos(a)*cos(b)) + x*(sin(a)*sin(b) - cos(a)*cos(b)) + y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*cos(d) + (-sin(a)*cos(b) - sin(b)*cos(a))*sin(d)*cos(c)) + z*((sin(a)*sin(b) - cos(a)*cos(b))*cos(e) + (-(-sin(a)*cos(b) - sin(b)*cos(a))*cos(c)*cos(d) - (sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d))*sin(e)), y*(-(-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*sin(d) + (-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(d)*cos(c))*sin(e), y*(-(-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*sin(d) + (-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*cos(d))*sin(e), z*(-(-sin(a)*cos(b) - sin(b)*cos(a))*sin(e) + (-(-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d))*cos(e)), 0], 
    [-l*sin(a)*sin(b) + l*cos(a)*cos(b) + w*(-sin(a)*cos(b) - sin(b)*cos(a)) + x*(-sin(a)*cos(b) - sin(b)*cos(a)) + y*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) + (-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c)) + z*((-sin(a)*cos(b) - sin(b)*cos(a))*cos(e) + (-(-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d))*sin(e)), -l*sin(a)*sin(b) + l*cos(a)*cos(b) + w*(-sin(a)*cos(b) - sin(b)*cos(a)) + x*(-sin(a)*cos(b) - sin(b)*cos(a)) + y*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) + (-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c)) + z*((-sin(a)*cos(b) - sin(b)*cos(a))*cos(e) + (-(-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d))*sin(e)), y*(-(sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*(-(-sin(a)*cos(b) - sin(b)*cos(a))*sin(d)*cos(c) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d))*sin(e), y*(-(sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*(-(-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e), z*(-(-sin(a)*sin(b) + cos(a)*cos(b))*sin(e) + (-(-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) - (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*cos(e)), 0], 
    [0, 0, y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e), y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e), -z*(-sin(c)*cos(d) - sin(d)*cos(c))*cos(e), 0]])

"""Step#6 Inv Velocity Kinematics"""
# Using psuedo inverse matrix, we can easily appraoch to relation from endpoint position and orientation to joint angles.

"""Step#7 Obtain Endpoint Compliance with Servo Stiffness"""
# jacobian = Matrix(Jacobian)

K = Matrix([
    [1,0,0,0,0,0],
    [0,1,0,0,0,0],
    [0,0,1,0,0,0],
    [0,0,0,0.15,0,0],
    [0,0,0,0,0.27,0],
    [0,0,0,0,0,0.33]])

Compliance = jacobian * (K**-1) * (jacobian.T)
# print(Compliance)
Compliance = [
  [3.7037037037037*z**2*((sin(a)*cos(b) + sin(b)*cos(a))*sin(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*cos(e))**2 + (y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(d)*cos(c))*sin(e))**2 + (y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*cos(d))*sin(e))*(6.66666666666667*y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + 6.66666666666667*z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*cos(d))*sin(e)) + 2*(-l*sin(a)*cos(b) - l*sin(b)*cos(a) + w*(sin(a)*sin(b) - cos(a)*cos(b)) + x*(sin(a)*sin(b) - cos(a)*cos(b)) + y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*cos(d) + (-sin(a)*cos(b) - sin(b)*cos(a))*sin(d)*cos(c)) + z*((sin(a)*sin(b) - cos(a)*cos(b))*cos(e) + (-(sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*sin(e)))**2, 3.7037037037037*z**2*((sin(a)*sin(b) - cos(a)*cos(b))*sin(e) + ((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) - (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*cos(e))*((sin(a)*cos(b) + sin(b)*cos(a))*sin(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*cos(e)) + (y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(d)*cos(c))*sin(e))*(y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)) + (6.66666666666667*y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + 6.66666666666667*z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*cos(d))*sin(e))*(y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)) + 2*(-l*sin(a)*sin(b) + l*cos(a)*cos(b) + w*(-sin(a)*cos(b) - sin(b)*cos(a)) + x*(-sin(a)*cos(b) - sin(b)*cos(a)) + y*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) + (-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c)) + z*((-sin(a)*cos(b) - sin(b)*cos(a))*cos(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*sin(e)))*(-l*sin(a)*cos(b) - l*sin(b)*cos(a) + w*(sin(a)*sin(b) - cos(a)*cos(b)) + x*(sin(a)*sin(b) - cos(a)*cos(b)) + y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*cos(d) + (-sin(a)*cos(b) - sin(b)*cos(a))*sin(d)*cos(c)) + z*((sin(a)*sin(b) - cos(a)*cos(b))*cos(e) + (-(sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*sin(e))), -3.7037037037037*z**2*((sin(a)*cos(b) + sin(b)*cos(a))*sin(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*cos(e))*(-sin(c)*cos(d) - sin(d)*cos(c))*cos(e) + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(d)*cos(c))*sin(e)) + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(6.66666666666667*y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + 6.66666666666667*z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*cos(d))*sin(e))]
  ,[3.7037037037037*z**2*((sin(a)*sin(b) - cos(a)*cos(b))*sin(e) + ((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) - (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*cos(e))*((sin(a)*cos(b) + sin(b)*cos(a))*sin(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*cos(e)) + (y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(d)*cos(c))*sin(e))*(y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)) + (y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*cos(d))*sin(e))*(6.66666666666667*y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + 6.66666666666667*z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)) + 2*(-l*sin(a)*sin(b) + l*cos(a)*cos(b) + w*(-sin(a)*cos(b) - sin(b)*cos(a)) + x*(-sin(a)*cos(b) - sin(b)*cos(a)) + y*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) + (-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c)) + z*((-sin(a)*cos(b) - sin(b)*cos(a))*cos(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*sin(e)))*(-l*sin(a)*cos(b) - l*sin(b)*cos(a) + w*(sin(a)*sin(b) - cos(a)*cos(b)) + x*(sin(a)*sin(b) - cos(a)*cos(b)) + y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*cos(d) + (-sin(a)*cos(b) - sin(b)*cos(a))*sin(d)*cos(c)) + z*((sin(a)*sin(b) - cos(a)*cos(b))*cos(e) + (-(sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*sin(e))), 3.7037037037037*z**2*((sin(a)*sin(b) - cos(a)*cos(b))*sin(e) + ((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) - (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*cos(e))**2 + (y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e))**2 + (y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e))*(6.66666666666667*y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + 6.66666666666667*z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)) + 2*(-l*sin(a)*sin(b) + l*cos(a)*cos(b) + w*(-sin(a)*cos(b) - sin(b)*cos(a)) + x*(-sin(a)*cos(b) - sin(b)*cos(a)) + y*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) + (-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c)) + z*((-sin(a)*cos(b) - sin(b)*cos(a))*cos(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*sin(e)))**2, -3.7037037037037*z**2*((sin(a)*sin(b) - cos(a)*cos(b))*sin(e) + ((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) - (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*cos(e))*(-sin(c)*cos(d) - sin(d)*cos(c))*cos(e) + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)) + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(6.66666666666667*y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + 6.66666666666667*z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e))]
  ,[-3.7037037037037*z**2*((sin(a)*cos(b) + sin(b)*cos(a))*sin(e) + (-(sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d) + (sin(a)*sin(b) - cos(a)*cos(b))*cos(c)*cos(d))*cos(e))*(-sin(c)*cos(d) - sin(d)*cos(c))*cos(e) + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(c)*cos(d) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(d)*cos(c))*sin(e)) + (6.66666666666667*y*(-sin(c)*cos(d) - sin(d)*cos(c)) - 6.66666666666667*z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(y*((-sin(a)*sin(b) + cos(a)*cos(b))*cos(c)*cos(d) + (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*sin(d)) + z*((-sin(a)*sin(b) + cos(a)*cos(b))*sin(d)*cos(c) - (sin(a)*sin(b) - cos(a)*cos(b))*sin(c)*cos(d))*sin(e)), -3.7037037037037*z**2*((sin(a)*sin(b) - cos(a)*cos(b))*sin(e) + ((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*sin(d) - (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d))*cos(e))*(-sin(c)*cos(d) - sin(d)*cos(c))*cos(e) + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)) + (6.66666666666667*y*(-sin(c)*cos(d) - sin(d)*cos(c)) - 6.66666666666667*z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(y*((-sin(a)*cos(b) - sin(b)*cos(a))*sin(c)*sin(d) + (sin(a)*cos(b) + sin(b)*cos(a))*cos(c)*cos(d)) + z*((sin(a)*cos(b) + sin(b)*cos(a))*sin(c)*cos(d) + (sin(a)*cos(b) + sin(b)*cos(a))*sin(d)*cos(c))*sin(e)), 3.7037037037037*z**2*(-sin(c)*cos(d) - sin(d)*cos(c))**2*cos(e)**2 + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))**2 + (y*(-sin(c)*cos(d) - sin(d)*cos(c)) - z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))*(6.66666666666667*y*(-sin(c)*cos(d) - sin(d)*cos(c)) - 6.66666666666667*z*(sin(c)*sin(d) - cos(c)*cos(d))*sin(e))]]
